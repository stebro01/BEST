%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand{\ttdefault}{txtt}



\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsenglish{\renewcommand{\contentsname}{Content:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{Technical Description of JCRdb (Jena Clinical Research Database) v1.0}
\date{Oct 18, 2023}
\release{}
\author{Stefan Brodoehl (sb)}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}
\sphinxstepscope




\chapter{1. Motivation:}
\label{\detokenize{TechnicalDetails:motivation}}
\sphinxAtStartPar
To provide a user\sphinxhyphen{}friendly, clean interface for the storage, retrieval, and visualization of multimodal clinical data at the Jena University Hospital.


\chapter{2. Overview:}
\label{\detokenize{TechnicalDetails:overview}}
\sphinxAtStartPar
The research database is specifically engineered for seamless integration into the desktop workspaces at Jena University Hospital. It features a streamlined, intuitive frontend for user interaction, facilitating the storage, retrieval, and visualization of multimodal clinical data. The backend employs a relational database management system optimized for efficient data handling.

\sphinxAtStartPar
Due to stringent local IT infrastructure constraints, driven primarily by the need to adhere to General Data Protection Regulations (GDPR), the database resides within the secure local network of Jena University Hospital. It is encapsulated in a single SQLite file, ensuring ease of management and high\sphinxhyphen{}speed access. User authentication is mandatory for database access, and connections are limited to those originating from within the hospitalâ€™s local network.

\sphinxAtStartPar
The frontend operates independently from a self\sphinxhyphen{}contained folder and requires no installation. To interact with the SQLite database, users must have read and write permissions. Importantly, all data remains securely stored in the backend database, while the frontend serves solely as an access and manipulation tool.

\sphinxAtStartPar
The database is available to a group of staff at the University Hospital of Jena. It is not available to the public. Multiple instances (i.e. database files) can be used to manage different projects independently. The database is designed to be easily extensible, allowing the addition of new data types and functionalities. Data can also be exchanged with other database instances or other systems using a defined HL7 JSON file standard.

\sphinxAtStartPar
The following figure illustrates the principle architecture of the database:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_db_scheme_jena}.png}
\caption{Overview to the database employed at the Jena University Hospital}\label{\detokenize{TechnicalDetails:id2}}\end{figure}


\chapter{3. Architecture:}
\label{\detokenize{TechnicalDetails:architecture}}
\sphinxAtStartPar
Database templates and build software are available at: {[}GitHub{]}(\sphinxurl{https://github.com/stebro01/research\_database\_sqlite\_i2b2.git})


\section{Frontend}
\label{\detokenize{TechnicalDetails:frontend}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Technology: Developed using the Quasar/Vue.js 3 Framework, with builds available for MacOS, Linux, and Windows.

\item {} 
\sphinxAtStartPar
User Interface: Intuitive and responsive, custom\sphinxhyphen{}built for the fast\sphinxhyphen{}paced, demanding environment of clinical research.

\item {} 
\sphinxAtStartPar
Functionalities: Equipped with data input forms, robust search and query capabilities, and specialized data visualization tools (coming soon) designed for clinical scientists.

\item {} 
\sphinxAtStartPar
Data Policy: Adheres to a strict data policy ensuring that all data remains local, fortifying user trust and GDPR compliance.

\end{itemize}


\section{Database}
\label{\detokenize{TechnicalDetails:database}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Database Engine: SQLite

\item {} 
\sphinxAtStartPar
Data Model: Utilizes the i2b2 Common Data Model (CDM) 16 star schema, optimized for the agile storage and retrieval of multimodal clinical data.

\end{itemize}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_db_scheme}.png}
\caption{Modified i2b2 Common Data Model (CDM) 16 star schema with additional tables for user management and CQL rules application.}\label{\detokenize{TechnicalDetails:id3}}\end{figure}


\chapter{4. Technical Details:}
\label{\detokenize{TechnicalDetails:technical-details}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTTTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Section
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Version
&\sphinxstyletheadfamily 
\sphinxAtStartPar
License
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Website / Additional Info
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
\sphinxstylestrong{Frontend}
&&&&\\
\sphinxhline
\sphinxAtStartPar
VueJS 3 Framework
&&
\sphinxAtStartPar
3.0.5
&
\sphinxAtStartPar
MIT
&
\sphinxAtStartPar
\sphinxtitleref{VueJS Official Website \textless{}https://vuejs.org/\textgreater{}}
\\
\sphinxhline
\sphinxAtStartPar
Quasar Framework
&&
\sphinxAtStartPar
2.0.0
&
\sphinxAtStartPar
MIT
&
\sphinxAtStartPar
\sphinxtitleref{Quasar Official Website \textless{}https://quasar.dev/\textgreater{}}
\\
\sphinxhline
\sphinxAtStartPar
Libraries
&
\sphinxAtStartPar
crypto\sphinxhyphen{}js
fs
sqlite3
&
\sphinxAtStartPar
4.1.1
0.0.1
5.1.4
&&\\
\sphinxhline
\sphinxAtStartPar
\sphinxstylestrong{Database}
&&&&\\
\sphinxhline
\sphinxAtStartPar
SQLite
&&
\sphinxAtStartPar
3.36.0
&
\sphinxAtStartPar
Public
&
\sphinxAtStartPar
\sphinxtitleref{SQLite Official Website \textless{}https://www.sqlite.org/index.html\textgreater{}}
\\
\sphinxhline
\sphinxAtStartPar
Tables
&
\sphinxAtStartPar
11 Tables
&&&
\sphinxAtStartPar
(view figure above)
\\
\sphinxhline
\sphinxAtStartPar
Views
&
\sphinxAtStartPar
3 Views
&&&
\sphinxAtStartPar
cql\_concept\_list, patient\_list, patient\_observations
\\
\sphinxhline
\sphinxAtStartPar
Triggers
&
\sphinxAtStartPar
3 Triggers
&&&
\sphinxAtStartPar
delete\_concept\_cql\_lookup, delete\_patient\_cascade, delete\_visite\_cascade
\\
\sphinxhline
\sphinxAtStartPar
Suggested Editor
&
\sphinxAtStartPar
DB Browser for
SQLite
&
\sphinxAtStartPar
3.12.2
&
\sphinxAtStartPar
Public
&
\sphinxAtStartPar
\sphinxtitleref{DB Browser for SQLite Official Website \textless{}https://sqlitebrowser.org/\textgreater{}}
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\chapter{5. Key Features:}
\label{\detokenize{TechnicalDetails:key-features}}

\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabular}[t]{*{3}{\X{1}{3}}}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Features
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Details
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
UI

\end{enumerate}
&
\sphinxAtStartPar
lightweight frontend
&
\sphinxAtStartPar
VueJS 3, Quasar Framework
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
multiplatform

\end{itemize}
&
\sphinxAtStartPar
Electron Framework
&
\sphinxAtStartPar
precompiled versions for
MacOS, Linux, Windows
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
adaptable

\end{itemize}
&
\sphinxAtStartPar
Easy customable
&
\sphinxAtStartPar
HTML/CSS based design
\\
\sphinxhline\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{1}
\item {} 
\sphinxAtStartPar
Database

\end{enumerate}
&
\sphinxAtStartPar
SQLite DB
&
\sphinxAtStartPar
predefined tables, views, triggers,
\sphinxtitleref{see Appendix for details}
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
lightweight

\end{itemize}
&
\sphinxAtStartPar
single file
&
\sphinxAtStartPar
no installation required
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
fast

\end{itemize}
&
\sphinxAtStartPar
optimized queries
&
\sphinxAtStartPar
i2b2 CDM 16 star schema
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
secure

\end{itemize}
&
\sphinxAtStartPar
user authentication
&
\sphinxAtStartPar
user management is realized via access rights
to the database file, pure offline solution
without internet connection required
\\
\sphinxhline\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{4}
\item {} 
\sphinxAtStartPar
Standardized concepts

\end{enumerate}
&&
\sphinxAtStartPar
redefined concepts based on LOINC, SNOMED/CT,
ICD10, custom definitions
\\
\sphinxhline\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{3}
\item {} 
\sphinxAtStartPar
Data Input

\end{enumerate}
&
\sphinxAtStartPar
via UI
&
\sphinxAtStartPar
customable input forms
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
single observations

\end{itemize}
&
\sphinxAtStartPar
add observations
&
\sphinxAtStartPar
available
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
set of observations

\end{itemize}
&
\sphinxAtStartPar
via schemes
&
\sphinxAtStartPar
predefined sets of Concepts and observations
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
meta data

\end{itemize}
&&
\sphinxAtStartPar
each observation is linked to a visit and
a patient including additional meta data,
timestamps, and user information
AND is defined by a concept (e.g. LOINC)
defining the type of observation
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
CQL rules

\end{itemize}
&&
\sphinxAtStartPar
CQL rules can be applied concepts and will
be executed automatically when a new
observation is added, \sphinxtitleref{see Appendix for details}
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
supported data types

\end{itemize}
&&
\sphinxAtStartPar
all data types supported by SQLite
(e.g. text, integer, float, blob)
added support for Images and RAW data
\\
\sphinxhline\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{4}
\item {} 
\sphinxAtStartPar
Data Search

\end{enumerate}
&&\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
within the UI

\end{itemize}
&
\sphinxAtStartPar
searching for subject
data and properties
&
\sphinxAtStartPar
customable search form with SQLite query
available
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
via SQL

\end{itemize}
&
\sphinxAtStartPar
performing complex
search queries and
joints
&
\sphinxAtStartPar
SQL queries can be executed directly in the
database using the suggested editor
\sphinxtitleref{DB Browser for SQLite}
\\
\sphinxhline\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{5}
\item {} 
\sphinxAtStartPar
Data Export

\end{enumerate}
&
\sphinxAtStartPar
via UI
via SQL
&
\sphinxAtStartPar
export of data in CSV format
export of data in HL7 JSON format
\\
\sphinxhline\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\setcounter{enumi}{6}
\item {} 
\sphinxAtStartPar
DB Management

\end{enumerate}
&&
\sphinxAtStartPar
Multiple functions for database management
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
Concepts

\end{itemize}
&&
\sphinxAtStartPar
add, edit, delete concepts within the UI
API for adding concepts from snomed/ct
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
User and Rules

\end{itemize}
&&
\sphinxAtStartPar
add, edit, delete users within the UI
\\
\sphinxhline\begin{itemize}
\item {} 
\sphinxAtStartPar
CQL rules

\end{itemize}
&&
\sphinxAtStartPar
add, edit, delete CQL rules within the UI
\\
\sphinxbottomrule
\end{tabular}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\section{Entering Data / Data Types}
\label{\detokenize{TechnicalDetails:entering-data-data-types}}
\sphinxAtStartPar
A major focus of this research database application/concept is the collection of different types of data. Therefore, this section will focus on this aspect.


\subsection{Data Types and definition of schemes}
\label{\detokenize{TechnicalDetails:data-types-and-definition-of-schemes}}
\sphinxAtStartPar
The data type of a variable is defined by the CONCEPT\_CD field in the CONCEPT\_DIMENSION table (\sphinxtitleref{please refer to the appendix of this section for further details}). The following principle data types are supported:


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Data Type
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
N
&
\sphinxAtStartPar
Coded for numeric data.
\\
\sphinxhline
\sphinxAtStartPar
T
&
\sphinxAtStartPar
Coded for textual data.
\\
\sphinxhline
\sphinxAtStartPar
D
&
\sphinxAtStartPar
Encoded for date types and follows the YYYY\sphinxhyphen{}MM\sphinxhyphen{}DD
format.
\\
\sphinxhline
\sphinxAtStartPar
R
&
\sphinxAtStartPar
Coded for raw data, to accommodate unprocessed or
unformatted information directly from the data source.
This type is used for variable images and other binary
data.
\\
\sphinxhline
\sphinxAtStartPar
F
&
\sphinxAtStartPar
Coded for findings, indicating whether a particular
clinical feature is present, with options such as
â€˜yesâ€™, â€˜noâ€™ and â€˜unknownâ€™.
\\
\sphinxhline
\sphinxAtStartPar
S
&
\sphinxAtStartPar
Coded for choices, often showing answers attached in
the CONCEPT\_PATH.
\\
\sphinxhline
\sphinxAtStartPar
A
&
\sphinxAtStartPar
Coded for answers to choices (â€˜Sâ€™), often showing
answers attached in the CONCEPT\_PATH
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
The following figures show the definition of a scheme using various data types:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_data_input_example01}.png}
\caption{Screenshot from the user interface showing the definition of a schema with different data types.}\label{\detokenize{TechnicalDetails:id4}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=400\sphinxpxdimen]{{img_data_input_example02}.png}
\caption{Further details of the example scheme.}\label{\detokenize{TechnicalDetails:id5}}\end{figure}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The different observations are associated with different data types. Note that there are different types of \sphinxtitleref{MoCA}, one representing a \sphinxtitleref{finding} (indicating that the patient has been tested for \sphinxtitleref{MoCA}), the other representing the \sphinxtitleref{numeric value} of the test.

\sphinxAtStartPar
LID indicates a LOINC\sphinxhyphen{}ID, which is a unique identifier for a particular LOINC concept.
\end{sphinxadmonition}


\section{Scheme definition}
\label{\detokenize{TechnicalDetails:scheme-definition}}
\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
\sphinxtitleref{Schemes} represent a set of observations. Defining a scheme and consequently using the scheme for data input is a fast and efficient way to enter data. However, it is also possible to enter data without defining a scheme. This is useful for one\sphinxhyphen{}time data entry or for data that is not part of a scheme.
\end{sphinxadmonition}

\sphinxAtStartPar
The \sphinxtitleref{Schemes} can be managed using the UI in the \sphinxtitleref{Settings / Schemes} tab. Administrative rights are required to manage the schemas.

\sphinxAtStartPar
The scheme definition is stored within the database in the \sphinxtitleref{CODE\_LOOKUP} table.

\sphinxAtStartPar
The following image shows the scheme definition of the example scheme from the previous section:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_data_input_schemeindb}.png}
\caption{Screenshot created using SQL DB Browser showing the scheme definition in the database.}\label{\detokenize{TechnicalDetails:id6}}\end{figure}


\section{Entering data using a scheme}
\label{\detokenize{TechnicalDetails:entering-data-using-a-scheme}}
\sphinxAtStartPar
To \sphinxstylestrong{input observations using a scheme}, a \sphinxtitleref{patient} and a \sphinxtitleref{visit} must be selected in the UI. By clicking on the \sphinxtitleref{Add} button, the user can select a scheme from the list of available schemes.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_data_input_scheme}.png}
\caption{Screenshot from the user interface showing a scheme.}\label{\detokenize{TechnicalDetails:id7}}\end{figure}

\sphinxAtStartPar
The data is then stored in the database to the \sphinxtitleref{OBSERVATION\_FACT} table. The following images shows the data that was entered using the scheme from the previous section:

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_data_input_db}.png}
\caption{Screenshots from the user interface display data entered according to the schema outlined in the previous section, as viewed through \sphinxtitleref{SQL DB Browser}.}\label{\detokenize{TechnicalDetails:id8}}\end{figure}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Instead of using the column \sphinxtitleref{OBSERVATION\_FACT}, the view \sphinxtitleref{patient\_observations} is employed. This view translates \sphinxtitleref{CONCEPT\_CD} to \sphinxtitleref{CONCEPT\_NAME\_CHAR} and \sphinxtitleref{TVAL\_CHAR} to \sphinxtitleref{TVAL\_RESOLVED}.
\end{sphinxadmonition}


\section{Concepts}
\label{\detokenize{TechnicalDetails:concepts}}
\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Further details can be found in the Appendix.
\end{sphinxadmonition}

\sphinxAtStartPar
In our database design, the CONCEPT\_DIMENSION plays a key role in defining the nature of observations derived from various sources such as LOINC or Snomed/CT. Each concept is identified by a unique CONCEPT\_CD, which serves as a definitive code for the observed data. To further specify the type of data an observation contains, we introduce the VALTYPE\_CD field.


\subsection{Overview}
\label{\detokenize{TechnicalDetails:id1}}
\sphinxAtStartPar
The following table provides an overview of the concepts that have been implemented.


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Concept
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Description
&\sphinxstyletheadfamily 
\sphinxAtStartPar
API
&\sphinxstyletheadfamily 
\sphinxAtStartPar
External Reference
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
LOINC
&
\sphinxAtStartPar
Logical Observation Identifiers
&&
\sphinxAtStartPar
{[}LOINC Website{]}(\sphinxurl{https://loinc.org})
\\
\sphinxhline
\sphinxAtStartPar
SNOMED\sphinxhyphen{}CT
&
\sphinxAtStartPar
Systematized Nomenclature of Medicine
&
\sphinxAtStartPar
X
&
\sphinxAtStartPar
{[}SNOMED Website{]}(\sphinxurl{https://www.snomed.org})
\\
\sphinxhline
\sphinxAtStartPar
ICD10
&
\sphinxAtStartPar
International Classification of Diseases
&&
\sphinxAtStartPar
{[}ICD10 Website{]}(\sphinxurl{https://www.who.int/classifications/icd/en/})
\\
\sphinxhline
\sphinxAtStartPar
CUSTOM
&
\sphinxAtStartPar
Customized Codes
&&
\sphinxAtStartPar
N/A
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{Managing Concepts}
\label{\detokenize{TechnicalDetails:managing-concepts}}
\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
For SNOMED, we offer an integrated SNOMED\sphinxhyphen{}CT API that can be accessed directly from the user interface during concept editing.

\begin{figure}[H]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_db_concept_api}.png}
\caption{When you select \sphinxtitleref{SNOMED} as the \sphinxtitleref{SOURCESYSTEM\_CD}, an API query option becomes available, symbol is denoted by a green arrow. This query feature allows you to search for \sphinxtitleref{SNOMED} concepts and obtain the corresponding \sphinxtitleref{CONCEPT\_CD} and \sphinxtitleref{CONCEPT\_PATH}, or to retrieve information associated with a specific \sphinxtitleref{CONCEPT\_CD}.}\label{\detokenize{TechnicalDetails:id9}}\end{figure}

\begin{sphinxadmonition}{warning}{Warning:}
\sphinxAtStartPar
This marks the sole external connection the database currently utilizes. Only information related to concepts will be transmitted. The URLs for this functionality are hardcoded in the corresponding JavaScript file.

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k+kd}{const}\PYG{+w}{ }\PYG{n+nx}{url\PYGZus{}full}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{l+s+s1}{\PYGZsq{}https://browser.ihtsdotools.org/snowstorm/snomed\PYGZhy{}ct/browser/MAIN/2023\PYGZhy{}02\PYGZhy{}28/concepts\PYGZsq{}}
\PYG{k+kd}{const}\PYG{+w}{ }\PYG{n+nx}{url\PYGZus{}short}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{l+s+s1}{\PYGZsq{}https://browser.ihtsdotools.org/snowstorm/snomed\PYGZhy{}ct/MAIN/2023\PYGZhy{}02\PYGZhy{}28/concepts\PYGZsq{}}
\PYG{k+kd}{const}\PYG{+w}{ }\PYG{n+nx}{url\PYGZus{}descriptions}\PYG{+w}{ }\PYG{o}{=}\PYG{+w}{ }\PYG{l+s+s1}{\PYGZsq{}https://browser.ihtsdotools.org/snowstorm/snomed\PYGZhy{}ct/browser/MAIN/descriptions\PYGZsq{}}
\end{sphinxVerbatim}
\end{sphinxadmonition}
\end{sphinxadmonition}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
Concepts are stored with the SQLite database in the table CONCEPT\_DIMENSION. The table is created when the database is initialized.

\sphinxAtStartPar
The UI allows concepts to be managed (added, edited, deleted). In addition, concepts can be exported and imported from the UI using a JSON file.
\end{sphinxadmonition}


\subsection{Related Concepts}
\label{\detokenize{TechnicalDetails:related-concepts}}
\sphinxAtStartPar
When using concepts of the VALTYPE\_CD = â€˜Sâ€™ (selection) answers are defined by the hierarchy of the concept in the CONCEPT\_PATH.

\sphinxAtStartPar
Sometimes, similar answers should be provided for different concepts, i.e.
\begin{itemize}
\item {} 
\sphinxAtStartPar
NIHS Score Item: 4a. Left Arm (LID: 70190\sphinxhyphen{}4)

\item {} 
\sphinxAtStartPar
NIHS Score Item: 4b. Right Arm (LID: 70967\sphinxhyphen{}5)

\end{itemize}

\sphinxAtStartPar
Therefore we introduced the concept of concept aliases or \sphinxtitleref{related concepts}. This is illustrated in the following figure.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_db_concept_related}.png}
\caption{The concept \sphinxtitleref{LID: 70190\sphinxhyphen{}4} serves as the primary concept, whereas \sphinxtitleref{LID: 70967\sphinxhyphen{}5} functions as an alias. These two are linked through the \sphinxtitleref{RELATED\_CONCEPT} column. Consequently, the alias inherits the same set of answers as the primary concept.}\label{\detokenize{TechnicalDetails:id10}}\end{figure}


\section{Export and Import of Data}
\label{\detokenize{TechnicalDetails:export-and-import-of-data}}
\sphinxAtStartPar
The database supports the export of data in CSV format and HL7 JSON format. The CSV format is a simple text format that can be opened with any text editor or spreadsheet program. The HL7 JSON format is a standardized format for the exchange of clinical data. The database uses the HL7 JSON format to exchange data with other instances of the database or other systems.

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
In the Appendix you will find exemplary CSV and HL7 JSON files.
\end{sphinxadmonition}


\chapter{6. Security and Compliance:}
\label{\detokenize{TechnicalDetails:security-and-compliance}}
\sphinxAtStartPar
In its intended use within the network of the University Hospital Jena, the database is protected by the following security measures
\sphinxhyphen{} the database is only available within the local network of the hospital
\sphinxhyphen{} the location of the database is shared only within the research study group
\sphinxhyphen{} only authorised users have access to the database

\sphinxAtStartPar
The database is designed to be used in a secure environment. It is not recommended to use the database in an unsecured environment. The database is not designed for use in a public environment.

\sphinxAtStartPar
By default, the research database is designed to work with data that is not considered personal data under the GDPR. However, the database may be used to store personal data. In this case, the user is responsible for compliance with the GDPR. The database is not designed for use in a public environment.


\chapter{7. Integration \& Extensibility:}
\label{\detokenize{TechnicalDetails:integration-extensibility}}
\sphinxAtStartPar
The UI front\sphinxhyphen{}end is a standalone application and can connect to any SQLite database file structured according to the template provided. The database file can be exchanged with other instances of the database or other systems using the HL7 JSON file standard.

\sphinxAtStartPar
There are currently no APIs available for direct interaction with the user interface. However, the database can be accessed directly via SQL queries using the suggested \sphinxtitleref{DB Browser for SQLite} editor: \sphinxurl{https://sqlitebrowser.org}.


\section{Integration der SQLite DB in KNIME}
\label{\detokenize{TechnicalDetails:integration-der-sqlite-db-in-knime}}
\sphinxAtStartPar
To analyze the data directly from the database, the SQLite DB can be seamlessly integrated into KNIME 5.1 (\sphinxurl{https://www.knime.com}).

\sphinxAtStartPar
Below is an example illustrating how to incorporate the data from the SQLite DB into KNIME.

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_data_integration_knime01}.png}
\caption{Sample KNIME workspace to connect to the DB and transform the data into a tabular format suitable for further analysis.}\label{\detokenize{TechnicalDetails:id11}}\end{figure}

\begin{figure}[htbp]
\centering
\capstart

\noindent\sphinxincludegraphics[width=1.000\linewidth]{{img_data_integration_knime02}.png}
\caption{Screenshot from the output of a python script node, which is used to transform the data into a tabular format suitable for further analysis.}\label{\detokenize{TechnicalDetails:id12}}\end{figure}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The SQL Statement for the \sphinxtitleref{DB Query Reader} is stated below:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{SELECT}\PYG{+w}{ }\PYG{o}{*}\PYG{p}{,}\PYG{+w}{ }\PYG{k}{CAST}\PYG{p}{(}\PYG{n}{NVAL\PYGZus{}NUM}\PYG{+w}{ }\PYG{k}{AS}\PYG{+w}{ }\PYG{n+nb}{REAL}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{as}\PYG{+w}{ }\PYG{n}{NVAL\PYGZus{}NUM\PYGZus{}REAL}
\PYG{k}{FROM}\PYG{+w}{ }\PYG{n}{patient\PYGZus{}observations}\PYG{p}{;}
\end{sphinxVerbatim}
\end{sphinxadmonition}

\begin{sphinxadmonition}{note}{Note:}
\sphinxAtStartPar
The python script to transform the data is provided in the appendix.
\end{sphinxadmonition}


\chapter{8. Testing \& Validation:}
\label{\detokenize{TechnicalDetails:testing-validation}}
\sphinxAtStartPar
Testing Frameworks:
\begin{itemize}
\item {} \begin{description}
\sphinxlineitem{Unit Tests: using the Jest Framework (\sphinxurl{https://jestjs.io/}) for testing}\begin{itemize}
\item {} 
\sphinxAtStartPar
data import and export

\item {} 
\sphinxAtStartPar
CRUD operations on the database

\item {} 
\sphinxAtStartPar
CQL rules application

\end{itemize}

\end{description}

\item {} \begin{description}
\sphinxlineitem{Integration Tests: using the Cypress Framework (\sphinxurl{https://www.cypress.io/}) for testing}\begin{itemize}
\item {} 
\sphinxAtStartPar
UI testing (e.g. data input, data search, data export)

\end{itemize}

\end{description}

\end{itemize}


\chapter{9. Conclusion \& Future Work:}
\label{\detokenize{TechnicalDetails:conclusion-future-work}}
\sphinxAtStartPar
The Research Database is a simple yet powerful tool for storing all types of clinical data in a single place. It is designed to be easily extensible, allowing new data types and functionalities to be added. Data can also be exchanged with other database instances or other systems using a defined HL7 JSON file standard.

\sphinxAtStartPar
The status as is is a first version of the database. It is already in use at the University Hospital of Jena and will be further developed in the future.

\sphinxAtStartPar
\sphinxstyleemphasis{The following features are planned for future releases:}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Data Visualisation

\item {} 
\sphinxAtStartPar
Built\sphinxhyphen{}in image and RAW data viewer

\item {} 
\sphinxAtStartPar
Enhanced security and compliance through database file encryption

\end{itemize}


\chapter{10. Acknowledgements:}
\label{\detokenize{TechnicalDetails:acknowledgements}}
\sphinxAtStartPar
The development of the database was supported by the following institutions
\sphinxhyphen{} Department of Neurology, University Hospital Jena
\sphinxhyphen{} IMSID \sphinxhyphen{} Institute for Medical Statistics, Informatics and Data Science, University Hospital Jena

\sphinxAtStartPar
The following persons contributed to the development of the database
\sphinxhyphen{} PD Dr. Stefan Brodoehl
\sphinxhyphen{} Anna Schweinar, cand. med.


\chapter{11. Appendix:}
\label{\detokenize{TechnicalDetails:appendix}}
\sphinxAtStartPar
Appendix only available in online version: \sphinxurl{https://stebro01.github.io/research\_database\_sqlite\_i2b2/}



\renewcommand{\indexname}{Index}
\printindex
\end{document}